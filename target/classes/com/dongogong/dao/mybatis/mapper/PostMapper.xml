<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dongogong.dao.mybatis.mapper.PostMapper">
  <cache />

  <select id="getPost" resultType="Post">
    SELECT PHOTOURL, POST_IDX AS POSTIDX, REGISTER_ID, PRICE, TITLE, CONTENT
     FROM POST
     WHERE REGISTER_ID = #{registerId} 
    </select>

  <select id="getPostList" resultType="Post">
    SELECT PHOTOURL, POST_IDX AS POSTIDX, REGISTER_ID, PRICE, TITLE, CONTENT
     FROM POST
     WHERE NOT BORDER_TYPE = 'auction'
     AND TRANSACTION_CONFIRMATION = 'no'
    </select>
    
    <select id="selectPost" resultType="Post">
     SELECT PHOTOURL, POST_IDX, PRICE, TITLE, CONTENT
     FROM POST
     WHERE POST_IDX = #{postIdx}
  </select>
    
    <select id="getCategory" resultType="Post" parameterType="java.lang.String">
    SELECT PHOTOURL, POST_IDX AS POSTIDX, REGISTER_ID, PRICE, TITLE, CONTENT, BORDER_TYPE
     FROM POST
     WHERE BORDER_TYPE = #{borderType}
       AND TRANSACTION_CONFIRMATION = 'no'
   
    </select>
    
    <select id="getPostListSize" resultType="Post">
    SELECT MAX(POST_IDX) AS POSTIDX
     FROM POST
    </select>
  
<insert id="registerPost" parameterType="Post">
INSERT INTO POST (post_Idx, register_Id, title, border_type, price, content, transaction_confirmation, photoUrl)
 VALUES(#{postIdx}, #{registerId}, #{title}, #{borderType}, #{price}, #{content}, 'no', #{photoUrl})
</insert>

 
</mapper>