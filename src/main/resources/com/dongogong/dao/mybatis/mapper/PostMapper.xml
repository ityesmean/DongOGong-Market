<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dongogong.dao.mybatis.mapper.PostMapper">
  <cache />

  <select id="getPost" resultType="Post">
    SELECT
      POSTIDX,
      TITLE,
      DESCN as description,
    FROM POST
    WHERE POSTIDX = #{postIdx}
  </select>

  <select id="getPostList" resultType="Post">
    SELECT POST_IDX, REGISTER_ID, TITLE, PRICE, CONTENT
     FROM POST
     WHERE NOT BORDER_TYPE = 'auction'
    </select>
    
    <select id="getPostListSize" resultType="Post">
    SELECT MAX(POST_IDX) AS POSTIDX
     FROM POST
    </select>
  
	<insert id="registerPost" parameterType="Post">
	INSERT INTO POST (post_Idx, register_Id, title, border_type, price, content, transaction_confirmation, photoUrl)
	 VALUES(#{postIdx}, #{registerId}, #{title}, 'auction', #{price}, #{content}, 'no', #{photoUrl})
	</insert>

 
</mapper>